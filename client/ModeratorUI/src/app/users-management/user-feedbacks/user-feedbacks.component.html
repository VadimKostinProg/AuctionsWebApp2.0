<ng-container>
  <div class=" d-flex justify-content-between">
    <h3>User feedbacks</h3>
  </div>

  <div *ngIf="feedbacks"
       class="mt-3">
    <div *ngFor="let feedback of feedbacks"
         class="mt-4 d-flex justify-content-between align-items-start">
      <div class="feedback">
        <a class="h5"
           [routerLink]="['/users', feedback.fromUserId]">
          {{feedback.fromUsername}}
        </a>
        <br>
        <span>{{feedback.createdAt | date: 'MM-dd-yyyy HH:mm'}}</span>
        <app-score [readonly]="true"
                   [selectedScore]="feedback.score"
                   class="mt-3"></app-score>
        <p class="h5">{{ feedback.comment }}</p>
      </div>

      <ng-template #actionsPopContent>
        <div class="actions-container">
          <button class="btn"
                  (click)="openActionModal(deleteFeedbackModal, feedback)">
            Delete
          </button>
        </div>
      </ng-template>

      <button type="button"
              class="btn actions-button"
              placement="bottom"
              [ngbPopover]="actionsPopContent">
        <i class="fa-solid fa-ellipsis"></i>
      </button>
    </div>

    <button *ngIf="hasNext"
            class="btn btn-outline-dark w-100"
            (click)="loadFeedbacks()">Load more...</button>
  </div>
</ng-container>

<ng-template #deleteFeedbackModal
             let-modal>
  <div class="modal-header">
    <h4 class="modal-title"
        id="modal-basic-title">
      Delete user feedback
    </h4>
    <button type="button"
            class="btn-close"
            aria-label="Close"
            (click)="modal.close()"></button>
  </div>
  <div class="modal-body">
    <span>Are you shure you want to delete user feedback?</span>
  </div>
  <div class="modal-footer d-flex justify-content-between">
    <button type="button"
            class="btn btn-outline"
            aria-label="Close"
            (click)="modal.close()">Cancel</button>
    <button type="button"
            class="btn default-btn-background"
            (click)="deleteFeedback(modal)">Delete</button>
  </div>
</ng-template>
