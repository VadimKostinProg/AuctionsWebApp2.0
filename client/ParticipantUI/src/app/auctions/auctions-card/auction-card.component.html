<div *ngIf="auction"
     class="card auction-card h-100 shadow-sm border-0">
  <div class="card-img-wrapper">
    <img [src]="mainImageUrl"
         class="card-img-top auction-image"
         alt="Auction Image">
    <div *ngIf="auction.status"
         class="auction-status-badge"
         [ngClass]="{
           'badge-active': auction.status === AuctionStatusEnum.Active,
           'badge-finished': auction.status === AuctionStatusEnum.Finished,
           'badge-cancelled': auction.status === AuctionStatusEnum.CancelledByAuctioneer || auction.status === AuctionStatusEnum.CancelledByModerator
         }">
      {{ auction.status === AuctionStatusEnum.Active ? 'Active' :
      auction.status === AuctionStatusEnum.Finished ? 'Finished' : 'Canceled' }}
    </div>
  </div>
  <div class="card-body d-flex flex-column">
    <h5 class="card-title text-truncate mb-2"
        [title]="auction.lotTitle">{{ auction.lotTitle }}</h5>

    <div class="d-flex align-items-center mb-2">
      <i class="fa-solid fa-star text-warning me-1"></i>
      <span *ngIf="auction.averageScore"
            class="text-muted">{{ auction.averageScore | number:'1.1-1' }}</span>
      <span *ngIf="!auction.averageScore"
            class="text-muted">No rating</span>
    </div>

    <p class="card-text text-muted mb-2">
      <i class="fa-solid fa-tag me-1"></i>
      {{ auction.category }}
    </p>

    <p class="card-text price-info mb-2">
      <span class="current-price-label">Current Bid:</span>
      <span class="current-price">${{ auction.currentPrice | number:'1.2-2' }}</span>
      <span *ngIf="showStartPrice"
            class="start-price text-muted"> / Start: ${{ auction.startPrice | number:'1.2-2' }}</span>
    </p>

    <p *ngIf="showCountdown"
       class="card-text countdown-timer text-danger fw-bold mb-2">
      <i class="fa-solid fa-hourglass-end me-1"></i> Finishes in: {{ timeRemaining }}
    </p>
    <p *ngIf="!showCountdown"
       class="card-text text-muted mb-2">
      <i class="fa-solid fa-calendar-alt me-1"></i> Finishes at {{ auction.finishTime | date: 'MMM d, y, HH:mm' }}
    </p>

    <p class="card-text auctioneer-info mb-3">
      <i class="fa-solid fa-user-tag me-1 text-secondary"></i>
      Auctioneer: <span class="fw-semibold">{{ auction.auctioneer.username }}</span>
    </p>

    <a class="btn default-btn-background mt-auto w-100"
       [routerLink]="['/auctions', auction.id, 'details']">View Details</a>
  </div>
</div>