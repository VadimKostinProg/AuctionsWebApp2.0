<div class="container-fluid">
  <h3>Complaints</h3>

  <span>What is the situation you need to complaint on?</span>

  <a [routerLink]="'/complaints/history'">
    View my complaints history
  </a>
  <div id="accordion">
    <div class="card">
      <div class="card-header"
           id="headingOne">
        <h5 class="mb-0">
          <button class="btn btn-link"
                  data-bs-toggle="collapse"
                  data-bs-target="#collapseOne"
                  aria-expanded="false"
                  aria-controls="collapseOne">
            Seller does not apply a delivery of the lot.
          </button>
        </h5>
      </div>

      <div id="collapseOne"
           class="collapse"
           aria-labelledby="headingOne"
           data-bs-parent="#accordion">
        <div *ngIf="notDeliveredAuctionsForBuyer"
             class="p-3">
          <div *ngIf="notDeliveredAuctionsForBuyer.length > 0; else emptyNotDeliveredAuctions">
            <h4>Complaint against the seller on the delivery absence.</h4>
            <form *ngIf="complaintOnNoDeliveryForm"
                  [formGroup]="complaintOnNoDeliveryForm"
                  class="w-50">
              <div class="form-field flex mb-2">
                <div>
                  <label for="auctionIdNoDelivery"
                         class="form-label pt">Auction:</label>
                </div>

                <div class="flex-1">
                  <select class="form-control"
                          formControlName="auctionIdNoDelivery">
                    <option *ngFor="let auction of notDeliveredAuctionsForBuyer"
                            [value]="auction.id">
                      #{{ auction.id }}: {{ auction.lotTitle }}
                    </option>
                  </select>
                </div>

                <div
                     *ngIf="!auctionIdNoDelivery?.valid && (auctionIdNoDelivery?.dirty || auctionIdNoDelivery?.touched)">
                  <span class="text-danger">Auction is required.</span>
                </div>
              </div>

              <div class="form-field flex mb-2">
                <div>
                  <label for="complaintTextNoDelivery"
                         class="form-label pt">Complaint text:</label>
                </div>

                <div class="flex-1">
                  <textarea class="form-control"
                            formControlName="complaintTextNoDelivery"></textarea>
                </div>

                <div
                     *ngIf="!complaintTextNoDelivery?.valid && (complaintTextNoDelivery?.dirty || complaintTextNoDelivery?.touched)">
                  <span class="text-danger">Complaint text is required.</span>
                </div>
              </div>
            </form>

            <button class="btn default-btn-background mt-3 "
                    (click)="sendComplaintOnNoDelivery()">Submit</button>
          </div>

          <ng-template #emptyNotDeliveredAuctions>
            <span>You have not had any auctions where seller had not performed delivery.</span>
          </ng-template>
        </div>
      </div>
    </div>
    <div class="card">
      <div class="card-header"
           id="headingTwo">
        <h5 class="mb-0">
          <button class="btn btn-link collapsed"
                  data-bs-toggle="collapse"
                  data-bs-target="#collapseTwo"
                  aria-expanded="false"
                  aria-controls="collapseTwo">
            Buyer of my auction does not pay for the lot.
          </button>
        </h5>
      </div>
      <div id="collapseTwo"
           class="collapse"
           aria-labelledby="headingTwo"
           data-bs-parent="#accordion">
        <div *ngIf="notPayedAuctionsForSeller"
             class="p-3">
          <div *ngIf="notPayedAuctionsForSeller.length > 0; else emptyNotPayedAuctions">
            <h4>Complaint against the buyer for the payment absence.</h4>
            <form *ngIf="complaintOnNoPaymentForm"
                  [formGroup]="complaintOnNoPaymentForm"
                  class="w-50">
              <div class="form-field flex mb-2">
                <div>
                  <label for="auctionIdNoPayment"
                         class="form-label pt">Auction:</label>
                </div>

                <div class="flex-1">
                  <select class="form-control"
                          formControlName="auctionIdNoPayment">
                    <option *ngFor="let auction of notPayedAuctionsForSeller"
                            [value]="auction.id">
                      #{{ auction.id }}: {{ auction.lotTitle }}
                    </option>
                  </select>
                </div>

                <div *ngIf="!auctionIdNoPayment?.valid && (auctionIdNoPayment?.dirty || auctionIdNoPayment?.touched)">
                  <span class="text-danger">Auction is required.</span>
                </div>
              </div>

              <div class="form-field flex mb-2">
                <div>
                  <label for="complaintTextNoPayment"
                         class="form-label pt">Complaint text:</label>
                </div>

                <div class="flex-1">
                  <textarea class="form-control"
                            formControlName="complaintTextNoPayment"></textarea>
                </div>

                <div
                     *ngIf="!complaintTextNoPayment?.valid && (complaintTextNoPayment?.dirty || complaintTextNoPayment?.touched)">
                  <span class="text-danger">Complaint text is required.</span>
                </div>
              </div>
            </form>

            <button class="btn default-btn-background mt-3 "
                    (click)="sendComplaintOnNoPayment()">Submit</button>
          </div>

          <ng-template #emptyNotPayedAuctions>
            <span>You have not had any auctions where buyer had not performed payment.</span>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
</div>